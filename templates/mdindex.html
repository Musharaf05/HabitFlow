<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>HabitFlow</title>
        <link rel="stylesheet" href="../static/tasks.css">
        <link rel="icon" href="{{ url_for('static', filename='checklist_16688556.png') }}" type="image/png">
    </head>
    <body>
        <div class="navbar">
            <span class="welcome-text">Welcome, {{ username }}!</span>
            <div class="navbar-actions">
                <div class="notification-icon-wrapper" onclick="toggleNotificationPanel()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16" style="cursor: pointer;">
                    <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2M8 1.918l-.797.161A4 4 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4 4 0 0 0-3.203-3.92zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5 5 0 0 1 13 6c0 .88.32 4.2 1.22 6"/>
                    </svg>
                    <span class="notification-bubble"></span>
                </div>
                
                <div class="mobile-menu-toggle" onclick="toggleMobileSidebar()">
                    <svg viewBox="0 0 24 24">
                        <path d="M8 2v4"/>
                        <path d="M16 2v4"/>
                        <rect x="3" y="4" width="18" height="18" rx="2"/>
                        <path d="M3 10h18"/>
                    </svg>
                </div>
                
                <a href="/logout" class="logout-btn">LOGOUT</a>
            </div>
        </div>

        <!-- Notification Panel -->
        <div class="notification-panel" id="notificationPanel">
            <div class="notification-panel-header">
                <span>NOTIFICATIONS</span>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <button class="clear-all-btn" onclick="clearAllNotifications()" id="clearAllBtn" style="display: none;">CLEAR ALL</button>
                    <span class="notification-panel-close" onclick="closeNotificationPanel()">&times;</span>
                </div>
            </div>
            <div class="notification-panel-content" id="notificationPanelContent"></div>
        </div>
        
        <div class="dashboard-container">
            <main class="main-panel">
                <nav class="tabs">
                    <button class="tab-btn active" onclick="switchTab('tasks')">TASKS</button>
                    <button class="tab-btn" onclick="switchTab('goals')">GOALS</button>
                    <button class="tab-btn" onclick="switchTab('reminders')">REMINDERS</button>
                    <button class="tab-btn" onclick="switchTab('habits')">HABITS</button>
                </nav>

                <div id="tab-tasks" class="tab-content active">
                    <div class="list-header grid-tasks">
                        <span>STATUS</span>
                        <span>TASK</span>
                        <span>TAG</span>
                        <span>DATE</span>
                        <span>ACTIONS</span>
                    </div>
                    <div class="list-container" id="taskListContainer"></div>
                    <div class="input-area">
                        <input type="text" id="taskInput" class="input-text" placeholder="NEW TASK" />
                        <select id="taskTag" class="input-sm">
                            <option value="PROJECTS">PROJECTS</option>
                            <option value="HOMEWORK">HOMEWORK</option>
                            <option value="PERSONAL">PERSONAL</option>
                            <option value="WORK">WORK</option>
                        </select>
                        <input type="date" id="taskDate" class="input-sm" />
                        <button class="add-btn" onclick="addItem('tasks')">ADD</button>
                    </div>
                </div>

                <div id="tab-goals" class="tab-content">
                    <div class="list-header grid-goals">
                        <span>GOAL</span>
                        <span>PRIORITY</span>
                        <span>DATE</span>
                        <span>ACTIONS</span>
                    </div>
                    <div class="list-container" id="goalListContainer"></div>
                    <div class="input-area">
                        <input type="text" id="goalInput" class="input-text" placeholder="NEW GOAL" />
                        <select id="goalPriority" class="input-sm">
                            <option value="LOW">LOW</option>
                            <option value="MEDIUM" selected>MEDIUM</option>
                            <option value="HIGH">HIGH</option>
                        </select>
                        <input type="date" id="goalDate" class="input-sm" />
                        <button class="add-btn" onclick="addItem('goals')">ADD</button>
                    </div>
                </div>

                <div id="tab-reminders" class="tab-content">
                    <div class="list-header grid-reminders">
                        <span>REMINDER</span>
                        <span>DATE</span>
                        <span>TIME</span>
                        <span>REPEAT</span>
                        <span>ACTIONS</span>
                    </div>
                    <div class="list-container" id="reminderListContainer"></div>
                    <div class="input-area">
                        <input type="text" id="remInput" class="input-text" placeholder="NEW REMINDER" />
                        <select id="remRepeat" class="input-sm">
                            <option value="NONE">NO REPEAT</option>
                            <option value="DAILY">DAILY</option>
                            <option value="WEEKLY">WEEKLY</option>
                            <option value="BI-WEEKLY">BI-WEEKLY</option>
                            <option value="MONTHLY">MONTHLY</option>
                        </select>
                        <input type="time" id="remTime" class="input-xs" value="09:00" />
                        <input type="date" id="remDate" class="input-sm" />
                        <button class="add-btn" onclick="addItem('reminders')">ADD</button>
                    </div>
                </div>

                <div id="tab-habits" class="tab-content">
                    <div class="list-header grid-habits">
                        <span>HABIT</span>
                        <span>FREQUENCY</span>
                        <span>TODAY</span>
                        <span>STREAK</span>
                        <span>ACTIONS</span>
                    </div>
                    <div class="list-container" id="habitListContainer"></div>
                    <div class="input-area">
                        <input type="text" id="habitInput" class="input-text" placeholder="NEW HABIT" />
                        <select id="habitFrequency" class="input-sm">
                            <option value="Daily" selected>DAILY</option>
                            <option value="Mon-Fri">MON-FRI</option>
                            <option value="Weekends">WEEKENDS</option>
                            <option value="Custom">CUSTOM</option>
                        </select>
                        <button class="add-btn" onclick="addItem('habits')">ADD</button>
                    </div>
                </div>
            </main>

            <aside class="sidebar">
                <div class="calendar-widget">
                    <div class="cal-header">
                        <button class="cal-nav-btn" onclick="changeMonth(-1)">&lt;</button>
                        <span id="calMonthYear">Loading...</span>
                        <button class="cal-nav-btn" onclick="changeMonth(1)">&gt;</button>
                    </div>
                    <div class="cal-grid">
                        <div class="cal-day-name">Su</div>
                        <div class="cal-day-name">Mo</div>
                        <div class="cal-day-name">Tu</div>
                        <div class="cal-day-name">We</div>
                        <div class="cal-day-name">Th</div>
                        <div class="cal-day-name">Fr</div>
                        <div class="cal-day-name">Sa</div>
                    </div>
                    <div class="cal-grid" id="calDays"></div>
                </div>

                <div class="upcoming-widget">
                    <div class="section-header">
                        <span class="section-title" id="upcomingTitle">UPCOMING (7 DAYS)</span>
                    </div>
                    <div class="upcoming-list" id="upcomingList"></div>
                </div>
            </aside>
        </div>

        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        
        <div class="sidebar-panel" id="sidebarPanel">
            <div class="sidebar-close" onclick="closeMobileSidebar()">
                <svg viewBox="0 0 24 24">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </div>
            
            <div class="calendar-widget">
                <div class="cal-header">
                    <button class="cal-nav-btn" onclick="changeMonth(-1)">&lt;</button>
                    <span id="calMonthYearMobile">Loading...</span>
                    <button class="cal-nav-btn" onclick="changeMonth(1)">&gt;</button>
                </div>
                <div class="cal-grid">
                    <div class="cal-day-name">Su</div>
                    <div class="cal-day-name">Mo</div>
                    <div class="cal-day-name">Tu</div>
                    <div class="cal-day-name">We</div>
                    <div class="cal-day-name">Th</div>
                    <div class="cal-day-name">Fr</div>
                    <div class="cal-day-name">Sa</div>
                </div>
                <div class="cal-grid" id="calDaysMobile"></div>
            </div>

            <div class="upcoming-widget" style="margin-top: 20px;">
                <div class="section-header">
                    <span class="section-title" id="upcomingTitleMobile">UPCOMING (7 DAYS)</span>
                </div>
                <div class="upcoming-list" id="upcomingListMobile"></div>
            </div>
        </div>

        <div class="modal-overlay" id="editModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">EDIT ITEM</h2>
                    <button class="modal-close" onclick="closeEditModal()">&times;</button>
                </div>
                <div id="modalBody"></div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeEditModal()">CANCEL</button>
                    <button class="btn btn-primary" onclick="saveEditModal()">SAVE</button>
                </div>
            </div>
        </div>

        <script src="../static/tasks.js"></script>
    </body>
</html>